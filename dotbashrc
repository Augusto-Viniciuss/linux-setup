# create alisases
alias ra='ranger'

# set editor and shell
export EDITOR=vim
export SHELL=/bin/bash

export TERM="xterm-256color"                                                                          

# allows killing tmux by exiting the window                                                           
alias tmuxn='tmux new-session -s $$'                                                       
_trap_exit() { tmux kill-session -t $$; }                                                       
trap _trap_exit EXIT                                                                                  

# allows killing process with all its children
killp () {

  pes=$1
  
	for child in $(ps -o pid,ppid -ax | \
   awk "{ if ( \$2 == $pes ) { print \$1 }}")
  do
    # echo "Killing child process $child because ppid = $pes"
    killp $child
  done
        
  # echo "killing $1"
  kill -9 $1 > /dev/null 2> /dev/null
}

# VIM alias
runvim() {
  if [ -z $TMUX ]; then
    tmux new-session -s $$ -d "vim $@ --servername dog" \; attach
    _trap_exit() { tmux kill-session -t $$; }                                                      
    trap _trap_exit EXIT                                                                          
  else
    vim $@ --servername dog
  fi
}
alias vim=runvim

# source tmuxinator
source $GIT_PATH/linux-setup/submodules/tmuxinator/completion/tmuxinator.bash

# load tmux automatically                                                                             
if [ "$RUN_TMUX" = "true" ]; then
  if command -v tmux>/dev/null; then                                                                    
    if [ ! -z "$PS1" ]; then # unless shell not loaded interactively, run tmux                          
      [[ ! $TERM =~ screen ]] && [ -z $TMUX ] && tmuxn                                                  
    fi                                                                                                  
  fi
fi
