set nocompatible              " be iMproved, required by Vundle
filetype off                  " required by Vundle
set t_Co=256        " 256 colors

set encoding=utf-8

"""""
""""" CONFIGURE VUNDLE PLUGIN MANAGER
"""""

" set the runtime path to include Vundle and initialize
set rtp+=~/.vim/bundle/Vundle.vim
call vundle#begin("~/.vim/VundlePlugins")

" let Vundle manage Vundle, required
Plugin 'VundleVim/Vundle.vim'

" A colorful, dark color scheme
Plugin 'nanotech/jellybeans.vim'

" A Vim plugin which shows a git diff in the 'gutter' (sign column).
Plugin 'airblade/vim-gitgutter'

" ifugitive.vim: a Git wrapper so awesome, it should be illegal
Plugin 'tpope/vim-fugitive'

" Lean & mean status/tabline for vim that's light as air.
Plugin 'bling/vim-airline'
Plugin 'vim-airline/vim-airline-themes'

" integration with tmux
Plugin 'benmills/vimux'

" code completion
Plugin 'ervandew/supertab'

" sharing registers between vims
Plugin 'ardagnir/united-front'

" file manager
Plugin 'scrooloose/nerdtree'

" All of your Plugins must be added before the following line
call vundle#end()            " required by Vundle
filetype plugin indent on    " required by Vundle

"""""
""""" / CONFIGURE VUNDLE PLUGIN MANAGER
"""""

" some color stuff
set background=dark
set cursorline
set cursorcolumn
colorscheme jellybeans

" running airline
set laststatus=2					" allow running without splitting

" map the leader key
let mapleader = ","

" should fix colors in tmux
set term=screen-256color

" Run the current file with rspec
map <Leader>m :call VimuxRunCommand("cd ~/timepix_workspace; catkin build")<CR>
map <Leader>k :VimuxCloseRunner<CR>

" general vim settings
" more natural splits
set splitbelow
set splitright
"
" set line numbering
set number
"
" indention
set expandtab                   " tab inserts spaces
set shiftwidth=2
set softtabstop=2
set autoindent                  " copy the indention from the last line
set smartindent                 " sometimes indent extra indention
set tabstop=2                   " width of the tab character
"
"
set showmatch                   " brief jump to matching parent
set title
set nowrap                      " dont wrap text
"
" searching and patterns
set ignorecase
set smartcase
set hlsearch
set incsearch

hi Search guibg=LightBlue
hi Search ctermbg=NONE ctermfg=Yellow cterm=bold,underline

" Switch between relative and absolute line numbers with leader-N
function! NumberToggle()
  if(&relativenumber == 1)
    set number
  else
    set relativenumber=1
  endif
endfunc
nnoremap <C-n> :call NumberToggle()<cr>

" should fix colors in tmux
set term=screen-256color

" nerd tree
map <C-n> :NERDTreeToggle<CR>

" " autoinstall plugins
" let vundle_readme=expand('~/.vim/VundlePlugins/vim-airline/README.md')
" if !filereadable(vundle_readme)
"   :PluginInstall
" endif
